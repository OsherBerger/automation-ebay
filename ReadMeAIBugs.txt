התמודדות עם באגים בקוד  

בסקירה סטטית של קוד האוטומציה (ללא הרצה בפועל), זוהו מספר בעיות מהותיות אשר גורמות לכך שהקוד אינו יציב, אינו עומד במלוא הדרישות ועלול להיכשל בסביבות שונות. להלן הבעיות המרכזיות, ההסבר והפתרונות המוצעים. 


בעיה 1: שימוש ב-Locators לא יציבים 

תיאור הבעיה: 
הקוד עושה שימוש ב-XPath ארוכים או סלקטורים התלויים במבנה ה-DOM (אינדקסים, div-ים מקוננים או טקסט משתנה). באתר דינמי כמו eBay, שינוי קטן במבנה העמוד עלול לשבור את הבדיקה גם אם הפונקציונליות תקינה. 

השפעה: 
בדיקות שבירות, תחזוקה גבוהה ו-false negatives. 

פתרון: 
להעדיף סלקטורים יציבים כגון data-testid, aria-label או getByRole, ולרכז את כל ה-locators בתוך Page Objects. 

 

בעיה 2: חוסר סנכרון בין פעולות (Missing await / waits) 

תיאור הבעיה: 
הקוד מבצע פעולות כמו חיפוש, מעבר עמוד או לחיצה על פריט, מבלי להמתין לטעינת העמוד או להופעת האלמנט הבא. AI נוטה להניח שהפעולות סינכרוניות, אך בפועל Playwright עובד בצורה אסינכרונית. 

השפעה: 
בדיקות לא יציבות (Flaky), כשלים אקראיים ותלות במהירות רשת. 

פתרון: 
להשתמש ב-await לכל פעולה אסינכרונית ולהמתין לאירוע רלוונטי כגון waitForSelector, waitForNavigation או שינוי URL. 

 

בעיה 3: Parsing שגוי של מחירים 

תיאור הבעיה: 
הקוד משווה מחירים כ-string מבלי להסיר תווי מטבע, פסיקים או להתמודד עם טווחי מחירים. לדוגמה: $1,299.99 מושווה ישירות לערך מספרי. 

השפעה: 
השוואות שגויות ואימות תקציב לא אמין. 

פתרון: 
לנקות את הטקסט מתווים לא מספריים ולהמיר ל-number לפני ביצוע השוואות, תוך הנחת מטבע אחיד. 


בעיה 4: חוסר טיפול ב-Paging 

תיאור הבעיה: 
במידה ופחות מ-N פריטים עומדים בתנאי המחיר בעמוד הראשון, הקוד אינו עובר לעמוד הבא גם אם קיימת אפשרות Paging. 

השפעה: 
אי עמידה בדרישות התרגיל וכיסוי חלקי של תרחיש החיפוש. 

פתרון: 
לממש לולאה שעוברת בין עמודים באמצעות כפתור “Next”, אוספת פריטים עד שמגיעים ל-limit או עד שאין יותר עמודים. 

 

בעיה 5: ערבוב אחריות בקוד (Violation of SRP) 

תיאור הבעיה: 
פונקציות מכילות גם לוגיקת UI, גם לוגיקה עסקית, גם Assertions וגם Logging, במקום הפרדה ברורה. 

השפעה: 
קוד קשה לתחזוקה ולהרחבה. 

פתרון: 
להפריד אחריות: 
Page Objects – אינטראקציה עם UI בלבד 
Flow / Service – תרחיש עסקי 
Tests – Assertions ואימותים 

 

סיכום 

הקוד שנוצר בעזרת כלי AI מהווה בסיס טוב, אך כולל בעיות נפוצות: סלקטורים שבירים, חוסר סנכרון, עיבוד נתונים שגוי וארכיטקטורה לא מופרדת. תיקון הבעיות משפר משמעותית את יציבות הבדיקות, עמידה בדרישות, קריאות הקוד והתאמתו לסטנדרטים מקצועיים של אוטומציה ו-CI. 

 